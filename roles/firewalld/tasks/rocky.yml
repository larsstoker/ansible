---
- name: Add swarm service to firewalld
  firewalld:
    service: docker-swarm
    permanent: yes
    immediate: yes
    state: enabled
  notify: reload firewalld
  when: swarm | default(false)

- name: Add masquerade to firewalld
  firewalld:
    masquerade: enabled
    permanent: yes
    immediate: yes
    state: enabled
  notify: reload firewalld
  when: swarm | default(false)

- name: Add kube-apiserver to firewalld
  firewalld:
    service: kube-apiserver
    permanent: yes
    immediate: yes
    state: enabled
  notify: reload firewalld
  when: service == "kube-apiserver"